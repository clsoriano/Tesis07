<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                template="./../template/layoutTemplate.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns="http://www.w3.org/1999/xhtml">

    <ui:define name="content">
        <h:form id="fProyecto">
            <h1>Proyectos</h1>
            <h4>Activos/Inactivos</h4>
            <b:commandButton value="Nuevo" 
                             look="primary" 
                             iconAwesome="fa-plus" 
                             action="#{proyectoController.newProyecto()}"
                             update="fAddEditProyecto fProyecto:pMod fProyecto:pElim fProyecto:pdProyecto"
                             immediate="true"/>
            <p:separator/>
            <p:panel>
                <b:dataTable value="#{proyectoController.proyectoList}"
                             var="p"
                             id="pdProyecto"
                             onselect="ajax:proyectoController.setSelectedProyecto(m);"
                             ondeselect="ajax:proyectoController.setIsEditProyecto(false);"
                             select="true"
                             selectionMode="single" 
                             update="fProyecto:pMod fProyecto:pElim fAddEditProyecto">
                    <b:dataTableColumn label="Institucion">
                        <h:outputText value="#{p.institucion.nbrInstitucion}"/>
                    </b:dataTableColumn>
                    <b:dataTableColumn label="Proyecto/Actividad">
                        <h:outputText value="#{p.descripcion}"/>
                    </b:dataTableColumn>
<!--                    <b:dataTableColumn label="Perfil/alumno">
                        <h:outputText value="# {p.perfil}"/>
                    </b:dataTableColumn>-->
                    <!--                        <b:dataTableColumn label="Inicio">
                                                <h:outputText value="# {p.fechaInicio}"/>
                                            </b:dataTableColumn>
                                            <b:dataTableColumn label="Horario dias">
                                                <h:outputText value="# {p.horasAsignadas}"/>
                                            </b:dataTableColumn>-->
                    <b:dataTableColumn label="Responsable">
                        <h:outputText value="#{p.nbrResponsable}"/>
                    </b:dataTableColumn>
                    <b:dataTableColumn label="Estado">
                        <h:outputText value="#{p.estado=='A' ? 'Activo' : 'Inactivo'}"/>
                    </b:dataTableColumn>
                </b:dataTable>
                <f:facet name="footer">                        
                    <b:commandButton id="pMod"
                                     value="Modificar" 
                                     iconAwesome="fa-pencil" />
                    <b:commandButton id="pElim" 
                                     value="Eliminar" 
                                     iconAwesome="fa-trash" />
                </f:facet>
            </p:panel>
        </h:form>
        <p:dialog id="addEditProyecto"
                  widgetVar="modalAddEditProyecto"
                  showEffect="fade" 
                  hideEffect="fade"
                  modal="true"
                  position="center center" 
                  onShow="PF('modalAddEditProyecto').initPosition()"
                  style="position:absolute; top: 10px;"
                  header="#{menuBean.isEditMenu ? 'Modificacion':'Nuevo'} Proyecto">
            <ui:include src="addEditProyecto.xhtml"/>
        </p:dialog>
    </ui:define>

</ui:composition>
