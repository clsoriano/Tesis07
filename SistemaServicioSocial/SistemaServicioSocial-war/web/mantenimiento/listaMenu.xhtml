<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../template/layoutTemplate.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns="http://www.w3.org/1999/xhtml">

    <ui:define name="content">
        <h1>
            Menu
        </h1>
        <p:panel>
            Mantenimiento / Menu
        </p:panel> 
        <p:separator/>
        <h:form id="fMenu">
            <p:panel header="Menu" id="pMenu" toggleable="true">
                <b:commandButton value="Nuevo" 
                             look="primary" 
                             iconAwesome="fa-plus" 
                             action="#{menuBean.nuevoMenu()}"
                             onsuccess="PF('modalAddEditMenu').show();return false;"
                             update="fAddEditMenu fMenu:mMod fMenu:mElim fMenu:pdMenu"
                             immediate="true"/>
                <p:spacer width="80px"/>
                <b:dataTable value="#{menuBean.listMenu}" 
                             var="m"
                             id="pdMenu"
                             onselect="ajax:menuBean.setSelectedSsMenu(m);"
                             ondeselect="ajax:menuBean.setIsEditMenu(false);"
                             select="true"
                             selectionMode="single" 
                             update="fMenu:mMod fMenu:mElim fAddEditMenu">
                    <b:dataTableColumn label="Codigo Menu">
                        <h:outputText value="#{m.codMenu}"/>
                    </b:dataTableColumn>
                    <b:dataTableColumn label="Descripcion">
                        <h:outputText value="#{m.descripcion}"/>
                    </b:dataTableColumn>
                    <b:dataTableColumn label="Menu Padre">
                        <h:outputText value="#{menuBean.getNamePadre(m.codMenuPadre)}"/>
                    </b:dataTableColumn>
                    <b:dataTableColumn label="Url">
                        <h:outputText value="#{m.url}"/>
                    </b:dataTableColumn>                        
                    <b:dataTableColumn label="Orden">
                        <h:outputText value="#{m.orden}"/>
                    </b:dataTableColumn>
                    <b:dataTableColumn label="Estado">
                        <h:outputText value="#{m.estado}"/>
                    </b:dataTableColumn>
                </b:dataTable>
                <f:facet name="footer">                     
                    <b:commandButton id="mMod" 
                                     value="Modificar" 
                                     iconAwesome="fa-pencil" 
                                     disabled="#{!menuBean.isEditMenu}" 
                                     onclick="PF('modalAddEditMenu').show();return false;"/>
                    <b:commandButton id="mElim" 
                                     value="Eliminar" 
                                     iconAwesome="fa-trash" 
                                     disabled="#{!menuBean.isEditMenu}" 
                                     action="#{menuBean.removeMenu()}"/>
                </f:facet>
            </p:panel>
        </h:form>
        <p:dialog id="addEditMenu"
                  widgetVar="modalAddEditMenu"
                  showEffect="fade" 
                  hideEffect="fade"
                  modal="true"
                  position="center center" 
                  onShow="PF('modalAddEditMenu').initPosition()"
                  style="position:absolute; top: 10px;"
                  header="#{menuBean.isEditMenu ? 'Modificacion':'Nuevo'} Menu">
            <ui:include src="addEditMenu.xhtml"/>
        </p:dialog>
    </ui:define>

</ui:composition>
